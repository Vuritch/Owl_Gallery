@{
    ViewData["Title"] = "Home";
}

<!-- HERO -->
<section class="hero-section text-center d-flex align-items-center justify-content-center">
    <div class="hero-text animate-fade-in">
        <h1 class="display-1 fw-bold mb-4 text-light">Discover Unique Accessories</h1>
        <p class="lead fs-3 mb-5 text-light">Express your individuality with every piece</p>
        <a href="@Url.Action("Products", "Products")" class="btn btn-owl btn-lg px-5 py-3">Shop Now</a>
    </div>
</section>

<!-- BENEFITS -->
<section class="counters-section py-6 bg-light text-center mt-5 mb-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3">
                <div class="counter-item bg-white rounded p-4 shadow-sm h-100">
                    <div class="icon mb-3 text-purple fs-1"><i class="fas fa-gem"></i></div>
                    <h2 class="counter text-purple mb-2" data-target="50000">0</h2>
                    <h5 class="fw-bold mb-2">Happy Customers</h5>
                    <p class="small text-muted">Only the finest metals, stones, and craftsmanship.</p>
                </div>
            </div>

            <div class="col-md-3">
                <div class="counter-item bg-white rounded p-4 shadow-sm h-100">
                    <div class="icon mb-3 text-purple fs-1"><i class="fas fa-shipping-fast"></i></div>
                    <h2 class="counter text-purple mb-2" data-target="10">0</h2>
                    <h5 class="fw-bold mb-2">Years Experience</h5>
                    <p class="small text-muted">Enjoy free and fast shipping on all your orders.</p>
                </div>
            </div>

            <div class="col-md-3">
                <div class="counter-item bg-white rounded p-4 shadow-sm h-100">
                    <div class="icon mb-3 text-purple fs-1"><i class="fas fa-box-open"></i></div>
                    <h2 class="counter text-purple mb-2" data-target="100">0</h2>
                    <h5 class="fw-bold mb-2">Products Sold</h5>
                    <p class="small text-muted">Each piece tells a story, crafted just for you.</p>
                </div>
            </div>

            <div class="col-md-3">
                <div class="counter-item bg-white rounded p-4 shadow-sm h-100">
                    <div class="icon mb-3 text-purple fs-1"><i class="fas fa-trophy"></i></div>
                    <h2 class="counter text-purple mb-2" data-target="25">0</h2>
                    <h5 class="fw-bold mb-2">Awards Won</h5>
                    <p class="small text-muted">Recognized for excellence in design and service.</p>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- FEATURED PRODUCTS -->
<section class="featured-products py-6">
    <div class="container">
        <h2 class="text-center mb-5 display-4 reveal">Featured Products</h2>
        <div class="row g-5">
            @* Product cards *@
            <div class="col-md-3 reveal-up">
                <div class="luxury-card">
                    <div class="luxury-card-img">
                        <img src="~/images/homeMain.jpg" alt="Crystal Pendant Necklace">
                    </div>
                    <div class="luxury-card-body">
                        <h5>Crystal Pendant Necklace</h5>
                        <p>EGP 299.90</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3 reveal-up delay-100">
                <div class="luxury-card">
                    <div class="luxury-card-img">
                        <img src="~/images/pexels-content-prod-co-5594288.jpg" alt="Pearl Drop Earrings">
                    </div>
                    <div class="luxury-card-body">
                        <h5>Pearl Drop Earrings</h5>
                        <p>EGP 199.90</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="trending-carousel bg-dark text-white py-5">
    <div class="container">
        <h2 class="text-center mb-4">🔥 Trending Now</h2>
        <div id="trendingCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="~/images/trending1.jpg" class="d-block w-100 rounded" alt="Trending 1">
                </div>
                <div class="carousel-item">
                    <img src="~/images/trending2.jpg" class="d-block w-100 rounded" alt="Trending 2">
                </div>
                <div class="carousel-item">
                    <img src="~/images/trending3.jpg" class="d-block w-100 rounded" alt="Trending 3">
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Add this after .carousel-inner -->
<ol class="carousel-indicators">
    <li data-bs-target="#trendingCarousel" data-bs-slide-to="0" class="active"></li>
    <li data-bs-target="#trendingCarousel" data-bs-slide-to="1"></li>
    <li data-bs-target="#trendingCarousel" data-bs-slide-to="2"></li>
</ol>

<!-- Add this after .carousel-inner -->
<a class="carousel-control-prev" href="#trendingCarousel" role="button" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
</a>
<a class="carousel-control-next" href="#trendingCarousel" role="button" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
</a>


<!-- NEWSLETTER -->
<section class="newsletter-section py-6 bg-purple text-center text-white">
    <div class="container">
        <h2 class="mb-4 reveal">Stay Updated</h2>
        <p class="mb-5 fs-5">Get exclusive deals and early access to new collections</p>

        <form id="newsletterForm" class="d-flex justify-content-center reveal-up">
            <div class="input-group w-75 w-md-50">
                <input type="email" id="emailInput" class="form-control form-control-lg" placeholder="Enter your email" required>
                <button id="subscribeBtn" class="btn btn-lg btn-light btn-animated" type="submit">
                    <span id="spinner" style="display:none;" class="spinner-border spinner-border-sm"></span>
                    <span id="btnText">Subscribe</span>
                </button>
            </div>
        </form>

        <div id="alertMessage" class="mt-3"></div>
    </div>
</section>
@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // ✨ Reveal on Scroll
            const reveals = document.querySelectorAll('.reveal, .reveal-up');
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        revealObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15 });
            reveals.forEach(el => revealObserver.observe(el));

            // ✨ Counter Animation
            const counters = document.querySelectorAll(".counter");
            const counterObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const counter = entry.target;
                        const target = +counter.getAttribute("data-target");
                        const speed = 100;

                        const updateCount = () => {
                            const count = +counter.innerText;
                            const increment = Math.ceil(target / speed);
                            if (count < target) {
                                counter.innerText = count + increment;
                                setTimeout(updateCount, 20);
                            } else {
                                counter.innerText = target.toLocaleString();
                            }
                        };
                        updateCount();
                        observer.unobserve(counter);
                    }
                });
            }, { threshold: 0.4 });
            counters.forEach(counter => counterObserver.observe(counter));

            // ✨ Carousel
            const trendingCarousel = document.querySelector('#trendingCarousel');
            if (trendingCarousel) {
                new bootstrap.Carousel(trendingCarousel, {
                    interval: 3000,
                    ride: 'carousel'
                });
            }

            // ✨ Newsletter Form
            const newsletterForm = document.getElementById('newsletterForm');
            const emailInput = document.getElementById('emailInput');
            const subscribeBtn = document.getElementById('subscribeBtn');
            const spinner = document.getElementById('spinner');
            const alertMessage = document.getElementById('alertMessage');

            newsletterForm.addEventListener('submit', async function (e) {
                e.preventDefault();
                const email = emailInput.value.trim();

                if (!email) {
                    alertMessage.innerHTML = `<div class="alert alert-danger mt-3">❌ Please enter your email address.</div>`;
                    return;
                }

                spinner.style.display = 'inline-block';
                subscribeBtn.disabled = true;
                alertMessage.innerHTML = '';

                try {
                    const response = await fetch('/Newsletter/Subscribe', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                        body: `email=${encodeURIComponent(email)}`
                    });

                    if (response.ok) {
                        alertMessage.innerHTML = `<div class="alert alert-success mt-3">🎉 Thanks for subscribing! Check your inbox.</div>`;
                        newsletterForm.reset();
                    } else {
                        alertMessage.innerHTML = `<div class="alert alert-danger mt-3">❌ Failed to subscribe. Try again.</div>`;
                    }
                } catch (error) {
                    console.error('Newsletter Error:', error);
                    alertMessage.innerHTML = `<div class="alert alert-danger mt-3">❌ An error occurred. Try later.</div>`;
                } finally {
                    spinner.style.display = 'none';
                    subscribeBtn.disabled = false;
                }
            });
        });
    </script>
}
